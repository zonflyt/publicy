<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>深圳市城市发展政策演变可视化 (1985-2020)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;700&family=Noto+Sans+SC:wght@300;400;500&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f9f9f7; /* 浅米色背景，模拟纸张 */
            color: #333;
        }
        
        .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* 自定义滚动条 */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* 线稿风格动画 */
        .draw-path {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw 2s ease-out forwards;
        }

        @keyframes draw {
            to {
                stroke-dashoffset: 0;
            }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 内置 SVG 图标组件 (替代外部库以修复渲染错误) ---
        const LayoutIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="3" y1="9" x2="21" y2="9"></line>
                <line x1="9" y1="21" x2="9" y2="9"></line>
            </svg>
        );

        const MaximizeIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="15 3 21 3 21 9"></polyline>
                <polyline points="9 21 3 21 3 15"></polyline>
                <line x1="21" y1="3" x2="14" y2="10"></line>
                <line x1="3" y1="21" x2="10" y2="14"></line>
            </svg>
        );

        const ZapIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        // SVG 组件：1986 带状组团
        const Map1986 = () => (
            <svg viewBox="0 0 400 300" className="w-full h-full fade-in">
                <defs>
                    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e5e5e5" strokeWidth="1"/>
                    </pattern>
                </defs>
                <rect width="400" height="300" fill="url(#grid)" />
                
                {/* 海岸线 */}
                <path d="M 20 250 Q 100 240 200 260 T 380 240" fill="none" stroke="#94a3b8" strokeWidth="1.5" strokeDasharray="4 4" />
                
                {/* 深南大道 (轴线) */}
                <path d="M 40 150 L 360 150" fill="none" stroke="#334155" strokeWidth="2" className="draw-path" />
                
                {/* 组团 (圆圈代表罗湖、上步、南头) */}
                <circle cx="300" cy="150" r="25" fill="rgba(255,255,255,0.8)" stroke="#0f766e" strokeWidth="1.5" />
                <text x="300" y="155" textAnchor="middle" fontSize="10" fill="#0f766e" className="serif">罗湖</text>
                
                <circle cx="220" cy="150" r="20" fill="rgba(255,255,255,0.8)" stroke="#0f766e" strokeWidth="1.5" />
                <text x="220" y="155" textAnchor="middle" fontSize="10" fill="#0f766e" className="serif">上步</text>
                
                <circle cx="80" cy="150" r="18" fill="rgba(255,255,255,0.8)" stroke="#0f766e" strokeWidth="1.5" />
                <text x="80" y="155" textAnchor="middle" fontSize="10" fill="#0f766e" className="serif">南头</text>

                {/* 绿化隔离带 */}
                <path d="M 160 120 L 160 180" fill="none" stroke="#84cc16" strokeWidth="1" strokeDasharray="2 2" />
                <path d="M 260 120 L 260 180" fill="none" stroke="#84cc16" strokeWidth="1" strokeDasharray="2 2" />
                
                <text x="200" y="280" textAnchor="middle" fontSize="12" fill="#64748b" className="serif italic">带状组团结构 (Linear Grouped)</text>
            </svg>
        );

        // SVG 组件：1996 网络扩张
        const Map1996 = () => (
            <svg viewBox="0 0 400 300" className="w-full h-full fade-in">
                <defs>
                    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e5e5e5" strokeWidth="1"/>
                    </pattern>
                </defs>
                <rect width="400" height="300" fill="url(#grid)" />
                
                {/* 区域背景轮廓 */}
                <path d="M 20 100 L 380 80 L 380 240 L 20 260 Z" fill="rgba(203, 213, 225, 0.1)" stroke="none" />

                {/* 纵向三轴 */}
                <line x1="100" y1="50" x2="100" y2="280" stroke="#94a3b8" strokeWidth="1" strokeDasharray="5 2" />
                <line x1="200" y1="50" x2="200" y2="280" stroke="#94a3b8" strokeWidth="1" strokeDasharray="5 2" />
                <line x1="300" y1="50" x2="300" y2="280" stroke="#94a3b8" strokeWidth="1" strokeDasharray="5 2" />

                {/* 横向三带 */}
                <path d="M 20 180 L 380 180" stroke="#334155" strokeWidth="1.5" />
                <path d="M 20 130 L 380 120" stroke="#64748b" strokeWidth="1" />
                <path d="M 20 230 L 380 230" stroke="#64748b" strokeWidth="1" />

                {/* 关键节点 */}
                <rect x="280" y="160" width="40" height="40" fill="none" stroke="#0369a1" strokeWidth="1.5" />
                <text x="300" y="185" textAnchor="middle" fontSize="10" fill="#0369a1" className="serif">福田中心</text>

                <circle cx="100" cy="180" r="15" fill="none" stroke="#0369a1" strokeWidth="1" />
                <text x="100" y="185" textAnchor="middle" fontSize="10" fill="#0369a1" className="serif">高新园</text>

                <text x="200" y="280" textAnchor="middle" fontSize="12" fill="#64748b" className="serif italic">网状结构 (Network & 3 Axes)</text>
            </svg>
        );

        // SVG 组件：2010 双中心与生态
        const Map2010 = () => (
            <svg viewBox="0 0 400 300" className="w-full h-full fade-in">
                 <defs>
                    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e5e5e5" strokeWidth="1"/>
                    </pattern>
                </defs>
                <rect width="400" height="300" fill="url(#grid)" />

                {/* 生态线 (铁线) */}
                <path d="M 20 100 Q 150 150 180 80 T 300 100 T 380 60" fill="none" stroke="#166534" strokeWidth="1.5" strokeDasharray="2 2" />
                <path d="M 30 250 Q 100 200 150 240 T 350 220" fill="none" stroke="#166534" strokeWidth="1.5" strokeDasharray="2 2" />

                {/* 双中心连接 */}
                <path d="M 60 180 L 280 170" fill="none" stroke="#334155" strokeWidth="0.5" />

                {/* 前海中心 */}
                <polygon points="60,160 75,190 45,190" fill="rgba(255,255,255,0.9)" stroke="#b91c1c" strokeWidth="1.5" />
                <text x="60" y="205" textAnchor="middle" fontSize="10" fill="#b91c1c" className="serif">前海中心</text>

                {/* 福田-罗湖中心 */}
                <polygon points="280,150 295,180 265,180" fill="rgba(255,255,255,0.9)" stroke="#b91c1c" strokeWidth="1.5" />
                <text x="280" y="195" textAnchor="middle" fontSize="10" fill="#b91c1c" className="serif">福田-罗湖</text>

                {/* 副中心节点 */}
                <circle cx="150" cy="120" r="8" fill="none" stroke="#475569" strokeWidth="1" />
                <circle cx="340" cy="160" r="8" fill="none" stroke="#475569" strokeWidth="1" />
                <circle cx="130" cy="220" r="8" fill="none" stroke="#475569" strokeWidth="1" />

                <text x="200" y="280" textAnchor="middle" fontSize="12" fill="#64748b" className="serif italic">双中心与生态控制 (Dual Centers & Ecology)</text>
            </svg>
        );

        const policies = [
            {
                id: '1986',
                year: '1986 - 1995',
                title: '奠基期：带状组团',
                subtitle: '《深圳经济特区总体规划（1986-2000）》',
                icon: <LayoutIcon className="w-5 h-5" />,
                visualization: Map1986,
                keywords: ['带状发展', '特区建设', '防止摊大饼'],
                description: '这是深圳城市发展的“宪法”。面对早期“三来一补”带来的爆发式增长，规划极具前瞻性地拒绝了单中心同心圆式的扩张，确立了依托深南大道的“带状组团结构”。',
                details: [
                    '空间策略：沿东西向发展，形成罗湖、上步、南头等独立组团。',
                    '隔离机制：组团之间保留绿化隔离带，防止城市无序粘连。',
                    '背景：适应特区狭长的地理地形，服务外向型经济。'
                ],
                source: '来源：1989年国务院批准实施'
            },
            {
                id: '1996',
                year: '1996 - 2009',
                title: '扩张期：三轴三带',
                subtitle: '《深圳市城市总体规划（1996-2010）》',
                icon: <MaximizeIcon className="w-5 h-5" />,
                visualization: Map1996,
                keywords: ['全域统筹', '高新技术', '区域中心'],
                description: '随着特区内外二元结构矛盾加剧，政策重心转向“全域城市化”。通过“三轴三带”打破二线关限制，将宝安、龙岗纳入核心发展区。',
                details: [
                    '空间策略：建立网状结构，强化轴向联系，发展西部港口与东部工业。',
                    '产业转型：明确以高新技术产业为先导，确立物流支柱地位。',
                    '基础设施：大规模建设高速公路网与港口，奠定现代大都市骨架。'
                ],
                source: '来源：2000年国务院批复'
            },
            {
                id: '2010',
                year: '2010 - 2020',
                title: '转型期：双中心',
                subtitle: '《深圳市城市总体规划（2010-2020）》',
                icon: <ZapIcon className="w-5 h-5" />,
                visualization: Map2010,
                keywords: ['存量优化', '城市更新', '生态铁线'],
                description: '面对土地资源枯竭（四个难以为继），深圳进入“存量规划”时代。重点在于提升城市质量、生态保护以及深港合作。',
                details: [
                    '空间策略：确立“福田-罗湖”与“前海”双中心，建设五个副中心。',
                    '土地政策：划定974平方公里基本生态控制线，严控建设用地增量。',
                    '实施手段：大力推行城市更新（旧改），向天空要空间，向存量要效益。'
                ],
                source: '来源：2010年国务院批复'
            }
        ];

        const App = () => {
            const [activePolicy, setActivePolicy] = useState(policies[0]);

            return (
                <div className="min-h-screen flex flex-col md:flex-row max-w-7xl mx-auto border-l border-r border-gray-200 shadow-sm bg-white">
                    {/* 左侧：可视化展示区 (固定或主要视觉区) */}
                    <div className="md:w-1/2 bg-[#f4f4f2] p-8 flex flex-col items-center justify-center border-b md:border-b-0 md:border-r border-gray-200 relative overflow-hidden">
                        <div className="absolute top-6 left-6 z-10">
                            <h1 className="text-2xl font-bold serif text-gray-800 tracking-wide">SHENZHEN</h1>
                            <p className="text-xs text-gray-500 uppercase tracking-widest mt-1">Urban Evolution 1985-2020</p>
                        </div>
                        
                        {/* 动态图表容器 - 模拟图纸边框 */}
                        <div className="w-full max-w-md aspect-[4/3] border-2 border-gray-300 p-2 bg-white shadow-lg relative mt-10">
                            <div className="absolute top-0 left-0 w-full h-full border border-dashed border-gray-200 pointer-events-none m-1"></div>
                            {/* 渲染当前选中的 SVG 组件 */}
                            <activePolicy.visualization />
                        </div>

                        {/* 图注区 */}
                        <div className="mt-8 text-center max-w-sm">
                            <p className="text-sm font-bold text-gray-700 mb-2">{activePolicy.subtitle}</p>
                            <div className="flex flex-wrap justify-center gap-2">
                                {activePolicy.keywords.map((kw, idx) => (
                                    <span key={idx} className="px-2 py-1 text-xs border border-gray-400 text-gray-600 rounded-full bg-transparent">
                                        {kw}
                                    </span>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* 右侧：交互式时间轴与文本解读 */}
                    <div className="md:w-1/2 flex flex-col h-screen overflow-y-auto">
                        {/* 顶部介绍 */}
                        <div className="p-8 pb-4">
                            <h2 className="text-xl serif font-bold text-gray-900 mb-2">政策演变时间轴</h2>
                            <p className="text-sm text-gray-600 leading-relaxed">
                                深圳三十五年的城市史，是一部从“速度”向“质量”转型的规划史。
                                点击下方卡片查看不同阶段的空间策略与政策核心。
                            </p>
                        </div>

                        {/* 时间轴列表 */}
                        <div className="flex-1 px-8 pb-10 space-y-6">
                            {policies.map((policy) => (
                                <div 
                                    key={policy.id}
                                    onClick={() => setActivePolicy(policy)}
                                    className={`group cursor-pointer transition-all duration-300 relative pl-8 border-l-2 ${activePolicy.id === policy.id ? 'border-teal-600' : 'border-gray-200 hover:border-gray-300'}`}
                                >
                                    {/* 时间轴节点点 */}
                                    <div className={`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 bg-white transition-colors ${activePolicy.id === policy.id ? 'border-teal-600 bg-teal-50' : 'border-gray-300 group-hover:border-gray-400'}`}></div>

                                    <div className={`p-5 rounded border transition-all ${activePolicy.id === policy.id ? 'bg-white border-teal-600 shadow-md transform scale-[1.02]' : 'bg-transparent border-gray-200 hover:bg-gray-50'}`}>
                                        <div className="flex justify-between items-center mb-3">
                                            <span className={`text-xs font-bold tracking-wider px-2 py-1 border rounded ${activePolicy.id === policy.id ? 'text-teal-700 border-teal-200 bg-teal-50' : 'text-gray-500 border-gray-300'}`}>
                                                {policy.year}
                                            </span>
                                            <div className={`${activePolicy.id === policy.id ? 'text-teal-600' : 'text-gray-400'}`}>
                                                {policy.icon}
                                            </div>
                                        </div>
                                        
                                        <h3 className="text-lg font-bold text-gray-800 mb-2 serif">{policy.title}</h3>
                                        <p className="text-sm text-gray-600 leading-relaxed mb-4">
                                            {policy.description}
                                        </p>

                                        {/* 展开的详细内容 */}
                                        <div className={`overflow-hidden transition-all duration-500 ${activePolicy.id === policy.id ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'}`}>
                                            <ul className="space-y-2 mb-3">
                                                {policy.details.map((detail, idx) => (
                                                    <li key={idx} className="text-xs text-gray-500 flex items-start">
                                                        <span className="mr-2 text-teal-500">▪</span>
                                                        {detail}
                                                    </li>
                                                ))}
                                            </ul>
                                            <p className="text-[10px] text-gray-400 text-right italic border-t border-gray-100 pt-2">
                                                {policy.source}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* 底部版权 */}
                        <div className="p-4 border-t border-gray-200 bg-gray-50 text-center">
                            <p className="text-[10px] text-gray-400">
                                数据来源：深圳市规划和自然资源局、历版城市总体规划文本
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
